---
metadata:
  name: Search field
  params:
    classes: ''
    size:
      - sm
      - md
      - lg
    button:
      - true
      - false
    input_params:
      name: input
      placeholder: Type here
    button_params:
      weight: primary
      content: Search
      icon: ''
  styleguide:
    - classes: 'w-80'
      button: true
      size: 'lg'
      input_params:
        name: input
        placeholder: Type here
      button_params:
        weight: primary
        content: Search
    - classes: 'w-80'
      button: true
      input_params:
        name: input
        placeholder: Type here
      button_params:
        weight: primary
        content: Search
    - classes: 'w-80'
      button: true
      size: 'sm'
      input_params:
        name: input
        placeholder: Type here
      button_params:
        weight: primary
        content: Search
    - classes: 'w-80'
      button: true
      size: 'lg'
      input_params:
        name: input
        placeholder: Type here
      button_params:
        weight: primary
        content: Search2
        icon: 'star'
    - classes: 'w-80'
      button: true
      input_params:
        name: input
        placeholder: Type here
      button_params:
        weight: primary
        content: Search2
        icon: 'star'
    - classes: 'w-80'
      button: true
      size: 'sm'
      input_params:
        name: input
        placeholder: Type here
      button_params:
        weight: primary
        content: Search2
        icon: 'star'
    - classes: 'w-80'
      button: false
      input_params:
        name: input
        placeholder: Type here
      button_params:
        weight: primary
        content: Search2
        icon: 'star'
---
{% liquid
  assign size = params.size | default: 'md'
  assign button = params.button | default: false
  assign classes = 'border border-input-border bg-input ' | append: params.classes

  assign input_classes = 'w-full pr-8 border-0 '
  assign button_classes = 'rounded '
  assign button_size = 'normal'

  if size == 'lg'
    assign classes = classes | append: ' p-2 h-16 '
    assign string_button_classes = button_classes | append: ' w-20 h-11 '
    assign icon_button_classes = button_classes | append: ' w-11 h-11 '
  elsif size == 'sm'
    assign classes = classes | append: ' pl-2 h-7 '
    if button == true
      assign classes = classes | append: ' rounded-r '
    endif
    assign input_classes = input_classes | append: ' h-6 '
    assign string_button_classes = button_classes | append: ' w-20 h-7 '
    assign icon_button_classes = button_classes | append: ' w-7 h-7 '
    assign button_size = 'small'
  else
    if button == true
      assign classes = classes | append: ' rounded-r '
    endif
    assign classes = classes | append: ' pl-2 h-11 '
    assign string_button_classes = button_classes | append: ' w-20 h-11 '
    assign icon_button_classes = button_classes | append: ' w-11 h-11 '
  endif

  if button == false
    assign classes = classes | append: ' flex-row-reverse pr-2 '
  endif

  assign input_params = params.input_params | hash_merge: classes: input_classes
  assign icon_params = null | hash_merge: name: 'search'
  assign icon_button_params = null | hash_merge: classes: icon_button_classes

  assign button_params = params.button_params | hash_merge: size: button_size, classes: string_button_classes
  assign icon_button = null | hash_merge: icon_params: icon_params, gap: 0, button_params: icon_button_params

%}
<div class="pos-search-field inline-flex items-center {{classes}}">
  {% if button_params.icon == blank or button == false %}
    {% theme_render_rc 'components/atoms/icon', params: icon_params %}
  {% endif %}
  {% theme_render_rc 'components/atoms/input', params: input_params %}
  {% if button %}
    {% if button_params.icon == blank %}
      {% theme_render_rc 'components/atoms/button', params: button_params %}
    {% else %}
      {% theme_render_rc 'components/molecules/iconbutton', params: icon_button %}
    {% endif %}
  {% endif %}
</div>

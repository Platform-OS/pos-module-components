---
metadata:
  name: Avatar
  params:
    imageSrc: ""
    name: "John Doe"
    size: "md"
  styleguide:
    - imageSrc: "https://i.pravatar.cc/150?img=59"
      name: "John Doe"
      size: "lg"
    - imageSrc: "https://i.pravatar.cc/150?img=47"
      name: "Jane Doe"
      size: "md"
    - imageSrc: "https://i.pravatar.cc/150?img=53"
      name: "John Doe"
      size: "sm"
    - imageSrc: ""
      name: "John Doe"
      size: "lg"
    - imageSrc: ""
      name: "Harrison Ford"
      size: "md"
    - imageSrc: ""
      name: "Mark Hamill"
      size: "sm"
---
{% parse_json sizes %}
{
  "xxxl": "w-48 h-48 text-7xl ",
  "xxl": "w-40 h-40 text-7xl ",
  "xl": "w-24 h-24 text-4xl ",
  "l": "w-12 h-12 text-xs ",
  "m": "w-8 h-8 text-xs ",
  "s": "w-6 h-6 text-xs ",
  "xs": "w-5 h-5 text-xs "
}
{% endparse_json %}
{% parse_json colors %}
[
  "bg-colorful ",
  "bg-colorful-hover ",
  "bg-graphic ",
  "bg-highlighted "
]
{% endparse_json %}
{% liquid
  assign size = params.size | default: 'md'
  assign name = params.name
  assign imageSrc = params.imageSrc

  assign stringClasses = 'rounded-full flex items-center justify-center text-inverted '
  assign imageClasses = 'rounded-full overflow-hidden '

  assign stringClasses = stringClasses | append: sizes[size]
  assign imageClasses = imageClasses | append: sizes[size]

  assign names = name | split: " "
  if names[0].size < names[1].size
    assign colorIndex = names[1].size | modulo: names[0].size
  else
    assign colorIndex = names[0].size | modulo: names[1].size
  endif
  if colorIndex > 3
    assign colorIndex = 3
  endif

  assign stringClasses = stringClasses | append: colors[colorIndex]
%}

{% if imageSrc == blank %}
<div class="{{stringClasses}}">
    {{names[0] | slice: 0}}{{names[1] | slice: 0}}
</div>
{% else %}
<div class="{{imageClasses}}">
  <img src="{{imageSrc}}" class="object-cover h-full">
</div>
{% endif %}
